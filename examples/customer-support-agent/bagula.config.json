{
  "$schema": "https://bagula.ai/schema/config.json",
  "suites": [
    {
      "id": "customer-support-suite",
      "name": "Customer Support Agent Tests",
      "description": "Test suite for customer support chatbot",
      "config": {
        "name": "support-agent",
        "model": "gpt-4",
        "provider": "openai",
        "temperature": 0.7,
        "maxTokens": 500,
        "systemPrompt": "You are a helpful and empathetic customer support agent for TechCorp, an electronics company. Help customers with their issues while being professional and friendly.",
        "tools": [
          {
            "name": "lookup_order",
            "description": "Look up customer order by order ID",
            "parameters": {
              "type": "object",
              "properties": {
                "order_id": {
                  "type": "string",
                  "description": "The order ID to look up"
                }
              },
              "required": ["order_id"]
            }
          },
          {
            "name": "process_refund",
            "description": "Process a refund for an order",
            "parameters": {
              "type": "object",
              "properties": {
                "order_id": {
                  "type": "string",
                  "description": "The order ID to refund"
                },
                "reason": {
                  "type": "string",
                  "description": "Reason for the refund"
                }
              },
              "required": ["order_id", "reason"]
            }
          },
          {
            "name": "track_shipment",
            "description": "Track the status of a shipment",
            "parameters": {
              "type": "object",
              "properties": {
                "tracking_number": {
                  "type": "string",
                  "description": "The tracking number"
                }
              },
              "required": ["tracking_number"]
            }
          }
        ]
      },
      "tests": [
        {
          "id": "test-refund-request",
          "name": "Handle refund request",
          "description": "Agent should look up order and process refund",
          "input": "Hi, I want to request a refund for my order #12345. The product arrived damaged.",
          "expectedBehavior": {
            "outputContains": ["refund", "order"],
            "toolsUsed": ["lookup_order", "process_refund"],
            "maxLatencyMs": 8000,
            "maxCostUsd": 0.02,
            "minConfidence": 0.8
          },
          "tags": ["refund", "critical"]
        },
        {
          "id": "test-order-tracking",
          "name": "Track order status",
          "description": "Agent should track shipment",
          "input": "Where is my order? Tracking number is TRK789456.",
          "expectedBehavior": {
            "outputContains": ["tracking", "status"],
            "toolsUsed": ["track_shipment"],
            "maxLatencyMs": 5000,
            "maxCostUsd": 0.01
          },
          "tags": ["tracking"]
        },
        {
          "id": "test-general-inquiry",
          "name": "Handle general inquiry",
          "description": "Agent should respond without using tools",
          "input": "What are your business hours?",
          "expectedBehavior": {
            "outputContains": ["hours"],
            "toolsNotUsed": ["lookup_order", "process_refund", "track_shipment"],
            "maxLatencyMs": 3000,
            "maxCostUsd": 0.005
          },
          "tags": ["general"]
        },
        {
          "id": "test-angry-customer",
          "name": "Handle angry customer",
          "description": "Agent should remain professional and empathetic",
          "input": "This is ridiculous! Your product is terrible and I want my money back NOW!",
          "expectedBehavior": {
            "outputContains": ["sorry", "understand"],
            "outputNotContains": ["ridiculous", "terrible"],
            "maxLatencyMs": 5000,
            "maxCostUsd": 0.015
          },
          "tags": ["edge-case", "sentiment"]
        },
        {
          "id": "test-multiple-issues",
          "name": "Handle multiple issues",
          "description": "Agent should address multiple concerns in one message",
          "input": "I need to track my order #12345 and also want to know about your return policy.",
          "expectedBehavior": {
            "outputContains": ["tracking", "return", "policy"],
            "toolsUsed": ["lookup_order"],
            "maxLatencyMs": 8000,
            "maxCostUsd": 0.02
          },
          "tags": ["complex"]
        },
        {
          "id": "test-unclear-request",
          "name": "Handle unclear request",
          "description": "Agent should ask clarifying questions",
          "input": "Something's wrong with my thing.",
          "expectedBehavior": {
            "outputContains": ["clarify", "help", "information"],
            "toolsNotUsed": ["lookup_order", "process_refund"],
            "maxLatencyMs": 4000,
            "maxCostUsd": 0.01
          },
          "tags": ["edge-case"]
        },
        {
          "id": "test-out-of-scope",
          "name": "Handle out-of-scope question",
          "description": "Agent should politely decline non-support questions",
          "input": "What's the weather like today?",
          "expectedBehavior": {
            "outputContains": ["support", "help", "assist"],
            "outputNotContains": ["weather", "sunny", "rainy"],
            "maxLatencyMs": 3000,
            "maxCostUsd": 0.005
          },
          "tags": ["edge-case"]
        }
      ],
      "budgets": {
        "maxLatencyMs": 10000,
        "maxCostPerTestUsd": 0.05,
        "maxTotalCostUsd": 0.5,
        "maxTokensPerTest": 2000
      }
    }
  ],
  "baseline": {
    "storage": "local",
    "path": ".bagula/baselines"
  },
  "reporting": {
    "formats": ["json", "html", "markdown"],
    "outputDir": ".bagula/reports"
  }
}
